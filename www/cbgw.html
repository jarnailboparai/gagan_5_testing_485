<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <!-- Change this if you want to allow scaling -->
        <meta name="viewport" content="width=default-width; user-scalable=no" />

        <meta http-equiv="Content-type" content="text/html; charset=utf-8">

        <script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
        <script type="text/javascript" src="phonegap.js"></script>
        <script type="text/javascript" charset="utf-8">
                
            var childBrowser;
                
            function getUrlVars() {
                var vars = {};
                var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
                    vars[key] = value;
                });
                return vars;
            }
                
            function onBodyLoad()
            {
                document.addEventListener("deviceready",onDeviceReady,false);
            }
            /* When this function is called, PhoneGap has been initialized and is ready to roll */
            /*     function onDeviceReady()
            {
                var goUrl = getUrlVars()["goUrl"];
                                    goUrl=decodeURIComponent(goUrl);
                redirectUrl="index.html";
                    
        try {
                    //both of these should work...
                    //window.plugins.childBrowser.showWebPage(url);
                    alert(goUrl);
                    window.plugins.childBrowser.showWebPage(goUrl);
                }
                catch (err)
                {
                    alert(err);
                }
					
                window.location = redirectUrl
                
                            }*/
            function onDeviceReady() {
                    
                var root = this;
                cb = window.plugins.childBrowser;
                    
                var goUrl = getUrlVars()["goUrl"];
                goUrl=decodeURIComponent(goUrl);
                redirectUrl="index.html";                    
                if(cb != null) {
                        
                    cb.onLocationChange = function(loc){ root.locChanged(loc); };
                    cb.onClose = function(){root.onCloseBrowser(); };
                    cb.onOpenExternal = function(){root.onOpenExternal(); };
                    cb.showWebPage(goUrl);
                }
            }
                
            function onCloseBrowser() {
                console.log("onCloseBrowser!");
                window.location = redirectUrl
            }
                
            function locChanged(loc) {
                console.log("locChanged!");
            }
                
            function onOpenExternal() {
                alert("onOpenExternal!");
            }                
        </script>
        <!--Turn off notification-->
    </head>
    <body onload="onBodyLoad()">






    </body>
</html>
